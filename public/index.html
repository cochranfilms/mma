<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <title>Marketing Mousetrap Agency — Welcome to MMA where we set the custom marketing traps for you.</title>
    <meta name="description" content="Marketing Mousetrap Agency partners with Cochran Films to engineer sophisticated brand, web, and media systems that compound ROI. Join the waitlist for early access.">
    <link rel="icon" href="Mousetrap.gif" type="image/gif">
    <link rel="canonical" href="https://marketingmousetrapagency.com/">
    <meta name="theme-color" content="#431d08">

    <!-- Fonts: Inter + Fraunces (display swap) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Fraunces:opsz,wght@9..144,700;9..144,800&display=swap" rel="stylesheet">

    <!-- Open Graph -->
    <meta property="og:title" content="Marketing Mousetrap Agency — Coming Soon">
    <meta property="og:description" content="Sophisticated systems that compound ROI. Join the waitlist for early access.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://marketingmousetrapagency.com/">
    <meta property="og:image" content="/Mousetrap.gif">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Marketing Mousetrap Agency — Coming Soon">
    <meta name="twitter:description" content="Sophisticated systems that compound ROI. Join the waitlist for early access.">
    <meta name="twitter:image" content="/Mousetrap.gif">

    <style>
      :root {
        /* Brand palette: browns + golds */
        --brown-900: #431d08;
        --brown-800: #70300E;
        --brown-700: #9d4314;
        --gold-500: #b99a45;
        --gold-450: #C7AE6A;
        --gold-400: #d5c28f;

        --brand-primary: var(--brown-900);
        --brand-accent: var(--gold-500);
        --ink: #f5efe7;
        --ink-strong: #fffefa;
        --muted: #d7c9b6;
        --bg: #100b09;

        --surface: rgba(255,255,255,0.05);
        --surface-border: rgba(255,255,255,0.12);

        --radius-lg: 0px;
        --radius-md: 0px;
        --radius-sm: 0px;
      }

      html, body { height: 100%; }

      body {
        margin: 0;
        color: var(--ink);
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        background: var(--bg);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Ensure predictable sizing and enforce square corners */
      *, *::before, *::after { box-sizing: border-box; border-radius: 0 !important; }

      /* Layered background: glows + dot grid + grain */
      body::before,
      body::after {
        content: "";
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: -2;
      }
      /* Radial gold glows */
      body::before {
        background:
          radial-gradient(1000px 500px at 85% -5%, rgba(215,194,143,0.18), transparent 60%),
          radial-gradient(800px 400px at -10% 110%, rgba(185,154,69,0.18), transparent 60%),
          radial-gradient(1200px 600px at 50% -30%, rgba(67,29,8,0.6), transparent 70%);
        mask: radial-gradient(1200px 700px at 50% 0%, rgba(255,255,255,0.9), transparent 65%);
      }
      /* Dot grid + film grain */
      body::after {
        background:
          repeating-linear-gradient(
            0deg,
            rgba(255,255,255,0.06),
            rgba(255,255,255,0.06) 1px,
            transparent 1px,
            transparent 24px
          ),
          repeating-linear-gradient(
            90deg,
            rgba(255,255,255,0.05),
            rgba(255,255,255,0.05) 1px,
            transparent 1px,
            transparent 24px
          );
        opacity: 0.06;
        mix-blend-mode: soft-light;
        z-index: -2;
      }
      /* Grain overlay */
      .grain {
        position: fixed; inset: 0; pointer-events: none; z-index: -1;
        opacity: .20;
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="1200" height="800" filter="url(%23n)" opacity="0.35"/></svg>');
        background-size: cover;
      }

      .container { display: grid; grid-template-rows: auto 1fr auto; min-height: 100%; }

      header { padding: 20px; position: sticky; top: 0; backdrop-filter: saturate(180%) blur(10px); background: linear-gradient(180deg, rgba(16,11,9,0.85), rgba(16,11,9,0.55)); border-bottom: 1px solid rgba(255,255,255,0.08); z-index: 10; }
      .head-row { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 14px; }

      .brand { display: inline-flex; align-items: center; gap: 12px; text-decoration: none; }
      .brand img { width: 40px; height: 40px; object-fit: contain; box-shadow: 0 6px 24px rgba(67,29,8,0.35); }
      .brand .wordmark { font-family: Fraunces, Georgia, serif; font-weight: 800; letter-spacing: .3px; color: var(--ink-strong); font-size: 18px; }

      nav a { color: var(--ink); text-decoration: none; padding: 10px 12px; font-weight: 600; }
      nav a:hover, nav a:focus-visible { outline: none; background: rgba(255,255,255,0.07); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.10); }

      .pill { display: inline-flex; align-items: center; gap: 10px; padding: 6px 10px; font-size: 12px; letter-spacing: .08em; text-transform: uppercase; color: var(--ink); background: rgba(185,154,69,0.16); border: 1px solid rgba(185,154,69,0.35); }
      .pill img { height: 18px; width: auto; filter: saturate(.9) contrast(1.05); }

      main { display: grid; place-items: center; padding: 24px 20px 24px; }
      .wrap { width: 100%; max-width: 1200px; }

      .hero { display: grid; gap: 20px; padding: 48px 20px; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02)); border: 1px solid var(--surface-border); box-shadow: 0 40px 100px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.06); }

      .eyebrow { display: inline-flex; align-items: center; gap: 10px; font-weight: 700; letter-spacing: .08em; font-size: 12px; color: var(--ink); text-transform: uppercase; background: rgba(67,29,8,0.35); border: 1px solid rgba(255,255,255,0.15); padding: 8px 12px; width: fit-content; }
      .dot { width: 8px; height: 8px; border-radius: 999px; background: var(--gold-450); box-shadow: 0 0 0 0 rgba(199,174,106,0.6); animation: pulse 2.4s infinite; }
      @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(199,174,106,0.6);} 70% { box-shadow: 0 0 0 16px rgba(199,174,106,0);} 100% { box-shadow: 0 0 0 0 rgba(199,174,106,0);} }

      h1 { margin: 0; font-family: Fraunces, Georgia, serif; font-size: clamp(32px, 6vw, 64px); line-height: 1.02; letter-spacing: -0.02em; color: var(--ink-strong); }
      .subhead { margin: 4px 0 0; font-size: clamp(16px, 2.2vw, 20px); color: var(--muted); max-width: 70ch; }
      .luxe { background: linear-gradient(90deg, var(--gold-450), var(--gold-500), var(--gold-400)); -webkit-background-clip: text; background-clip: text; color: transparent; }

      .hero-grid { display: grid; gap: 18px; grid-template-columns: 1fr; }
      .panel { background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); border: 1px solid var(--surface-border); padding: 18px 16px; box-shadow: 0 18px 50px rgba(0,0,0,0.3), inset 0 0 0 1px rgba(255,255,255,0.05); }
      .panel:hover { transform: translateY(-2px); transition: transform 160ms ease, box-shadow 160ms ease; box-shadow: 0 26px 70px rgba(0,0,0,0.34), inset 0 0 0 1px rgba(255,255,255,0.06); }

      /* Waitlist form */
      .form { display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 6px; max-width: 720px; margin-left: auto; margin-right: auto; }
      .field { position: relative; }
      .field input[type=email] { width: 100%; background: rgba(255,255,255,0.08); color: var(--ink-strong); border: 1px solid rgba(255,255,255,0.16); padding: 14px 14px; font-size: 16px; outline: none; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1); }
      .field input::placeholder { color: #cfc5b7; }
      .field input:focus-visible { box-shadow: 0 0 0 3px rgba(199,174,106,0.45); border-color: rgba(199,174,106,0.75); }
      .hp { position: absolute; left: -10000px; top: auto; width: 1px; height: 1px; overflow: hidden; }
      .btn { appearance: none; border: none; cursor: pointer; text-decoration: none; font-weight: 700; letter-spacing: .02em; padding: 14px 18px; display: inline-flex; align-items: center; gap: 10px; color: #0e0b06; background: linear-gradient(180deg, var(--gold-450), var(--gold-500)); box-shadow: 0 8px 24px rgba(185,154,69,0.28); white-space: nowrap; width: 100%; justify-content: center; }
      .btn:active { transform: translateY(1px); }
      .btn-ghost { color: var(--ink); background: transparent; border: 1px solid rgba(255,255,255,0.18); box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06); }
      .btn-ghost:hover { background: rgba(255,255,255,0.06); }

      .partners { display: inline-flex; align-items: center; gap: 12px; margin-top: 6px; padding: 8px 10px; border: 1px dashed rgba(185,154,69,0.55); background: rgba(185,154,69,0.06); }
      .partners span { color: var(--ink); font-weight: 700; font-size: 12px; letter-spacing: .06em; text-transform: uppercase; }
      .partners img { height: 28px; width: auto; display: block; filter: saturate(.9) contrast(1.05); }

      /* Marquee */
      .marquee { margin-top: 26px; overflow: hidden; border: 1px solid rgba(255,255,255,0.12); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); }
      .marquee-track { display: flex; gap: 14px; padding: 12px; will-change: transform; animation: scroll 40s linear infinite; }
      @keyframes scroll { from { transform: translateX(0);} to { transform: translateX(-50%);} }
      .chip { display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; color: var(--ink); background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.14); font-weight: 600; white-space: nowrap; }

      /* Value grid */
      .values { display: grid; gap: 16px; grid-template-columns: 1fr; margin-top: 26px; }
      .value-card { position: relative; padding: 18px; background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)); border: 1px solid var(--surface-border); box-shadow: 0 20px 60px rgba(0,0,0,0.32), inset 0 0 0 1px rgba(255,255,255,0.05); }
      .value-card h3 { margin: 0 0 6px; font-family: Fraunces, Georgia, serif; color: var(--ink-strong); font-size: 22px; }
      .value-card p { margin: 0; color: var(--muted); }
      .value-card .accent { position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, var(--gold-450), var(--gold-500), var(--gold-400)); }

      /* Icon bubbles for feature list */
      .list { display: grid; gap: 12px; margin: 0; padding: 0; list-style: none; }
      .list li { display: grid; grid-template-columns: 36px 1fr; gap: 12px; align-items: center; }
      .bubble { width: 36px; height: 36px; display: grid; place-items: center; background: rgba(185,154,69,0.15); border: 1px solid rgba(185,154,69,0.35); color: var(--ink); font-size: 18px; line-height: 1; }

      .proof { margin-top: 26px; padding: 18px; border: 1px solid rgba(255,255,255,0.14); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); display: grid; gap: 10px; }

      .roadmap { margin-top: 26px; padding: 18px; border: 1px solid rgba(255,255,255,0.14); background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); }
      .timeline { display: grid; grid-template-columns: 1fr; gap: 12px; margin: 0; padding: 0; list-style: none; }
      .t-item { display: grid; grid-template-columns: 16px 1fr; gap: 10px; align-items: start; }
      .t-dot { width: 10px; height: 10px; border-radius: 999px; background: var(--gold-450); box-shadow: 0 0 0 2px rgba(199,174,106,0.25); margin-top: 6px; }
      .t-line { height: 100%; width: 1px; background: linear-gradient(180deg, rgba(199,174,106,0.5), rgba(199,174,106,0)); margin: 0 auto; }

      footer { padding: 26px 20px 40px; color: var(--muted); font-size: 14px; }
      .foot-row { max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; flex-wrap: wrap; gap: 10px; }
      .foot-row a { color: var(--ink); text-decoration: none; padding: 6px 8px; }
      .foot-row a:hover, .foot-row a:focus-visible { outline: none; background: rgba(255,255,255,0.08); }

      .visually-hidden { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0 0 0 0); white-space: nowrap; border: 0; }

      /* Responsive */
      @media (min-width: 880px) {
        .hero { padding: 72px 56px; }
        .hero-grid { grid-template-columns: 1.1fr 0.9fr; gap: 24px; }
        .values { grid-template-columns: repeat(3, 1fr); }
      }

      /* Keep form stacked on all screens */
      @media (min-width: 560px) {
        .form { grid-template-columns: 1fr; }
        .form .btn { width: 100%; justify-content: center; }
      }

      /* Reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .dot { animation: none; }
        .marquee-track { animation: none; }
      }
    </style>
  </head>
  <body>
    <div class="grain" aria-hidden="true"></div>
    <div class="container">
      <header>
        <div class="head-row">
          <a class="brand" href="#top" aria-label="Marketing Mousetrap Agency">
            <img src="Mousetrap.gif" alt="Marketing Mousetrap Agency logo">
            <span class="wordmark">Marketing Mousetrap Agency</span>
          </a>
          <nav aria-label="Primary">
            <a href="#about">About</a>
            <a href="#capabilities">Capabilities</a>
            <a href="#contact">Contact</a>
          </nav>
          <div class="pill" aria-label="Partner">
            <img src="CF_Logo_Black2025.png" alt="Cochran Films">
            In partnership with Cochran Films
          </div>
        </div>
      </header>

      <main id="top">
        <div class="wrap">
          <!-- Hero -->
          <section class="hero reveal" id="about" aria-labelledby="h-title">
            <div class="eyebrow"><span class="dot" aria-hidden="true"></span> Welcome to MMA - where we design custom marketing traps for you.</div>
            <h1 id="h-title"><span class="luxe" data-shimmer>Sophisticated</span> systems that compound ROI.</h1>
            <p class="subhead">We engineer brand, web, and media pipelines that capture and convert demand—without chaos.</p>

            <div class="hero-grid">
              <div class="panel" role="form" aria-labelledby="waitlist-title">
                <h2 id="waitlist-title" style="margin:0 0 8px;font-family:Fraunces,Georgia,serif;color:var(--ink-strong);font-size:20px">Join the waitlist</h2>
                <p style="margin:0 0 10px;color:var(--muted)">Request early access and we’ll notify you before launch.</p>
                <form id="waitlistForm" class="form" novalidate>
                  <div class="field">
                    <label class="visually-hidden" for="email">Email address</label>
                    <input id="email" name="email" type="email" inputmode="email" autocomplete="email" placeholder="you@company.com" required aria-required="true">
                    <input class="hp" type="text" name="company" tabindex="-1" autocomplete="off" aria-hidden="true">
                  </div>
                  <button class="btn" type="submit">Request early access</button>
                </form>
                <!-- Lead modal -->
                <dialog id="leadModal" style="border:1px solid rgba(255,255,255,0.14); background:#140f0c; color:#f5efe7; padding:0; width:min(560px, 96vw)">
                  <form method="dialog" style="margin:0;">
                    <div style="padding:20px; border-bottom:1px solid rgba(255,255,255,0.14); background:#100b09">
                      <h3 style="margin:0; font-family:Fraunces,Georgia,serif; color:#fffefa; font-size:20px">Tell us a bit more</h3>
                    </div>
                    <div style="padding:20px; display:grid; gap:10px">
                      <label class="visually-hidden" for="lead_name">Name</label>
                      <input id="lead_name" name="lead_name" placeholder="Your name" style="background:rgba(255,255,255,0.08); color:#fffefa; border:1px solid rgba(255,255,255,0.16); padding:12px">

                      <label class="visually-hidden" for="lead_phone">Phone</label>
                      <input id="lead_phone" name="lead_phone" placeholder="Phone" style="background:rgba(255,255,255,0.08); color:#fffefa; border:1px solid rgba(255,255,255,0.16); padding:12px">

                      <label class="visually-hidden" for="lead_website">Current website</label>
                      <input id="lead_website" name="lead_website" placeholder="https://yourwebsite.com" style="background:rgba(255,255,255,0.08); color:#fffefa; border:1px solid rgba(255,255,255,0.16); padding:12px">

                      <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:6px">
                        <button type="button" id="leadCancel" class="btn-ghost" style="padding:12px 16px">Cancel</button>
                        <button type="button" id="leadSubmit" class="btn" style="padding:12px 16px">Send</button>
                      </div>
                      <div id="leadStatus" role="status" aria-live="polite" style="font-size:14px; color:#d7c9b6"></div>
                    </div>
                  </form>
                </dialog>
                <div id="formStatus" role="status" aria-live="polite" style="margin-top:8px;font-size:14px;color:var(--muted); text-align:center"></div>
              </div>

              <div class="panel">
                <h2 style="margin:0 0 8px;font-family:Fraunces,Georgia,serif;color:var(--ink-strong);font-size:20px">What we build</h2>
                <ul class="list">
                  <li>
                    <div class="bubble" aria-hidden="true">🤖</div>
                    <div>
                      <strong>Automation & Integrations</strong><br>
                      APIs, orchestration, analytics — measurable efficiency.
                    </div>
                  </li>
                  <li>
                    <div class="bubble" aria-hidden="true">🖥️</div>
                    <div>
                      <strong>Web & Product Systems</strong><br>
                      Performant, accessible apps and sites with modern stacks.
                    </div>
                  </li>
                  <li>
                    <div class="bubble" aria-hidden="true">🎬</div>
                    <div>
                      <strong>Enterprise Media & Brand</strong><br>
                      Cinematic content aligned to pipeline goals.
                    </div>
                  </li>
                </ul>
              </div>
            </div>

            <!-- Marquee: verticals we serve -->
            <div class="marquee" aria-label="Industries">
              <div class="marquee-track" id="mq">
                <div class="chip">🏦 Finance</div>
                <div class="chip">🏢 Real Estate</div>
                <div class="chip">🏥 Healthcare</div>
                <div class="chip">💻 Technology</div>
                <div class="chip">🛍️ Retail</div>
                <div class="chip">🏛️ Public Sector</div>
                <!-- Duplicate for seamless loop -->
                <div class="chip">🏦 Finance</div>
                <div class="chip">🏢 Real Estate</div>
                <div class="chip">🏥 Healthcare</div>
                <div class="chip">💻 Technology</div>
                <div class="chip">🛍️ Retail</div>
                <div class="chip">🏛️ Public Sector</div>
              </div>
            </div>
          </section>

          <!-- Value pillars -->
          <section id="capabilities" class="values reveal" aria-label="Capabilities">
            <div class="value-card">
              <div class="accent" aria-hidden="true"></div>
              <h3>Automation & Integrations</h3>
              <p>Connect your stack end‑to‑end. Orchestrate data, trigger workflows, and surface insights where they matter.</p>
            </div>
            <div class="value-card">
              <div class="accent" aria-hidden="true"></div>
              <h3>Web & Product Systems</h3>
              <p>Build fast, accessible experiences that scale. Design systems and performance discipline included.</p>
            </div>
            <div class="value-card">
              <div class="accent" aria-hidden="true"></div>
              <h3>Enterprise Media & Brand</h3>
              <p>Story and system working together. Cinematic production with Cochran Films, optimized for pipeline results.</p>
            </div>
          </section>

          <!-- Partnership proof -->
          <section class="proof reveal" aria-label="Partnership">
            <div class="partners">
              <span>In partnership with</span>
              <img src="CF_Logo_Black2025.png" alt="Cochran Films">
            </div>
            <p style="margin:0;color:var(--muted)">Cinematic storytelling stitched into sophisticated systems — so every touchpoint advances revenue.</p>
          </section>

          <!-- Roadmap teaser -->
          <section class="roadmap reveal" aria-labelledby="roadmap-title">
            <h2 id="roadmap-title" style="margin:0 0 8px;font-family:Fraunces,Georgia,serif;color:var(--ink-strong);font-size:20px">Roadmap</h2>
            <ol class="timeline">
              <li class="t-item">
                <div class="t-dot" aria-hidden="true"></div>
                <div>
                  <strong>Private beta</strong><br>
                  Initial cohort onboarding and systems hardening.
                </div>
              </li>
              <li class="t-item">
                <div class="t-dot" aria-hidden="true"></div>
                <div>
                  <strong>Partner pilots</strong><br>
                  Selected enterprise pilots with measurable KPIs.
                </div>
              </li>
              <li class="t-item">
                <div class="t-dot" aria-hidden="true"></div>
                <div>
                  <strong>Public launch</strong><br>
                  Open enrollment with prioritized onboarding windows.
                </div>
              </li>
            </ol>
          </section>
        </div>
      </main>

      <footer id="contact">
        <div class="foot-row">
          <div>
            © <span id="y"></span> Marketing Mousetrap Agency. All rights reserved.
          </div>
          <div>
            <a href="#privacy">Privacy</a>
            <a href="#accessibility">Accessibility</a>
            <a href="#terms">Terms</a>
            <a href="mailto:Marketingmousetrapagency@gmail.com">Email us</a>
          </div>
        </div>
      </footer>
    </div>

    <script>
      // Dynamic year
      document.getElementById('y').textContent = new Date().getFullYear();

      // Reduced motion
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) {
        const mq = document.getElementById('mq');
        if (mq) mq.style.animation = 'none';
      } else {
        // Pause marquee on hover
        const mq = document.getElementById('mq');
        if (mq) {
          mq.parentElement.addEventListener('mouseenter', () => mq.style.animationPlayState = 'paused');
          mq.parentElement.addEventListener('mouseleave', () => mq.style.animationPlayState = 'running');
        }
      }

      // Reveal on intersection + one-time shimmer
      const io = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add('reveal-in');
            const luxe = entry.target.querySelector('[data-shimmer]');
            if (luxe && !prefersReduced) {
              luxe.animate(
                [
                  { filter: 'brightness(1)', backgroundPosition: '0% 50%' },
                  { filter: 'brightness(1.2)', backgroundPosition: '100% 50%' }
                ],
                { duration: 1200, easing: 'ease', iterations: 1 }
              );
            }
            io.unobserve(entry.target);
          }
        });
      }, { threshold: 0.2 });
      document.querySelectorAll('.reveal').forEach((el) => io.observe(el));

      // Waitlist form: send via API (EmailJS) with mailto fallback
      const form = document.getElementById('waitlistForm');
      const status = document.getElementById('formStatus');
      function setStatus(msg, ok) {
        status.textContent = msg;
        status.style.color = ok ? '#d5c28f' : '#f3b3b3';
      }
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = (document.getElementById('email')).value.trim();
        const honey = form.querySelector('input[name="company"]').value;
        if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
          setStatus('Please enter a valid email address.', false);
          return;
        }
        // If honeypot filled, pretend success
        if (honey) {
          setStatus('Thanks! You\'re on the list.', true);
          form.reset();
          return;
        }

        // Open modal to collect more details before sending
        const modal = document.getElementById('leadModal');
        const leadStatus = document.getElementById('leadStatus');
        const leadSubmit = document.getElementById('leadSubmit');
        const leadCancel = document.getElementById('leadCancel');
        modal.showModal();

        function onCancel() { modal.close(); }
        async function onSubmit() {
          leadStatus.textContent = 'Sending…';
          const name = (document.getElementById('lead_name')).value.trim();
          const phone = (document.getElementById('lead_phone')).value.trim();
          const website = (document.getElementById('lead_website')).value.trim();
          try {
            const res = await fetch('/api/emailjs/send', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ email, first_name: name, phone, website }),
            });
            if (res.ok) {
              leadStatus.textContent = 'Sent. You\'re on the list!';
              setStatus('Thanks! You\'re on the list.', true);
              modal.close();
              form.reset();
              cleanup();
              return;
            }
          } catch (_) {}

          // Fallback: send directly via EmailJS REST API if server route is unavailable
          try {
            const SERVICE_ID = 'service_t11yvru';
            const TEMPLATE_ID_ADMIN = 'template_rjp7hxy';
            const TEMPLATE_ID_CLIENT = 'template_lzio9kd';
            const USER_ID = 'p4pF3OWvh-DXtae4c';
            const baseParams = {
              email,
              first_name: name,
              phone,
              website,
              cta_url: 'https://www.marketingmousetrapagency.com/early-access',
              // Add common recipient aliases to satisfy EmailJS template settings
              to_email: email,
              to_name: name || email,
              reply_to: email,
              user_email: email,
              user_name: name || email,
            };
            const sendEmailJs = async (templateId) => {
              const payload = {
                service_id: SERVICE_ID,
                template_id: templateId,
                user_id: USER_ID,
                template_params: baseParams,
              };
              const r = await fetch('https://api.emailjs.com/api/v1.0/email/send', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload),
              });
              if (!r.ok) throw new Error('EmailJS send failed');
            };
            await sendEmailJs(TEMPLATE_ID_ADMIN);
            await sendEmailJs(TEMPLATE_ID_CLIENT);
            leadStatus.textContent = 'Sent. You\'re on the list!';
            setStatus('Thanks! You\'re on the list.', true);
            modal.close();
            form.reset();
            cleanup();
            return;
          } catch (_) {}

          // Last resort fallback: open mail client
          leadStatus.textContent = 'Couldn\'t send. Opening your email client…';
          const subject = encodeURIComponent('Waitlist request — Marketing Mousetrap Agency');
          const body = encodeURIComponent(`Please add me to the waitlist.\n\nEmail: ${email}\nName: ${name}\nPhone: ${phone}\nWebsite: ${website}\n`);
          window.location.href = `mailto:Marketingmousetrapagency@gmail.com?subject=${subject}&body=${body}`;
          modal.close();
          setStatus('Opening your email client… If it didn\'t open, email us directly.', true);
          cleanup();
        }
        function cleanup() {
          leadSubmit.removeEventListener('click', onSubmit);
          leadCancel.removeEventListener('click', onCancel);
        }
        leadSubmit.addEventListener('click', onSubmit);
        leadCancel.addEventListener('click', onCancel);

        // Do not proceed to mailto until modal attempts send first
      });
    </script>

    <!-- JSON‑LD for rich results -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Marketing Mousetrap Agency",
        "url": "https://marketingmousetrapagency.com/",
        "logo": "https://marketingmousetrapagency.com/Mousetrap.gif",
        "email": "mailto:Marketingmousetrapagency@gmail.com",
        "memberOf": { "@type": "Organization", "name": "Cochran Films" }
      }
    </script>
  </body>
  </html>


